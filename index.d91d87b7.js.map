{"mappings":"AAMO,SAASA,EAAUC,EAAaC,EAAMC,GAC3C,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,WAAY,QACZC,YAAa,aACbC,WAAY,SAGd,OAAOC,MACL,4BAAgBL,UAAeF,cAAiBC,8CAAkCF,KAClFS,MAAKC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAK3B,OAAOH,EAASI,MAAM,G,CCnB1B,MAAMC,KAAEC,EAAIC,QAAEC,EAAOC,SAAEC,EAAQC,MAAEC,EAAKC,MAAEC,EAAKC,gBAAEC,GCFtC,CACLX,KAAMY,SAASC,cAAc,gBAC7BX,QAASU,SAASC,cAAc,YAChCT,SAAUQ,SAASC,cAAc,cACjCP,MAAOM,SAASC,cAAc,UAC9BL,MAAOI,SAASC,cAAc,UAC9BH,gBAAiBE,SAASC,cAAc,mBDF5CZ,EAAKa,iBAAiB,UAOtB,SAAsBC,GAIpB,GAHAA,EAAIC,iBAEJC,EAAQF,EAAIG,cAAcC,SAASlC,YAAYmC,OAC1CH,EAKH,OAJAR,EAAMY,YAAc,uBACpBC,YAAW,KACTb,EAAMY,YAAc,EAAE,GACrB,KAGLE,EAAO,EACPvC,EAAUiC,EAAOM,EAfP,IAgBP7B,MAAK,EAAC8B,KAAEA,EAAIC,UAAEA,MACO,IAAhBD,EAAKE,SACPrB,EAASsB,QAAS,EAClBpB,EAAMc,YACJ,2EACFC,YAAW,KACTf,EAAMc,YAAc,EAAE,GACrB,MAGDG,EAAKE,OAASD,IAChBpB,EAASsB,QAAS,GAqExBxB,EAAQyB,UAAY,GACpBjB,EAAgBU,YAAc,GAlE1BQ,EAAcL,GAEVA,EAAKE,SAAWD,GAA6B,IAAhBD,EAAKE,SACpCf,EAAgBU,YACd,8DAEJE,GAAQ,CAAC,IAGVO,OAAMC,GAAOC,QAAQC,IAAIF,I,IA3C9B1B,EAASS,iBAAiB,SA+C1B,WACE9B,EAAUiC,EAAOM,EA7CP,IA8CP7B,MAAK,EAAC8B,KAAEA,MACHA,EAAKE,OA/CH,KAgDJrB,EAASsB,QAAS,EAClBhB,EAAgBU,YACd,8DAEJE,GAAQ,EACRM,EAAcL,EAAK,IAGpBM,OAAMC,GAAOC,QAAQC,IAAIF,I,IAzD9B,IAAId,EAAQ,GAERM,EAAO,EA0DX,SAASM,EAAcK,GACrB,MAAMC,EAASD,EACZE,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,6CAEDN,WAAsBE,0FAGlBC,+DAGAC,kEAGGC,mEAGCC,sCAMjBC,KAAK,IACRzC,EAAQ0C,mBAAmB,YAAaV,E","sources":["services/API-service.js","src/index.js","services/getRefs.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '33163433-7381312326b7cb4a7310bb1a7';\n// let page = 1;\n// const imagesPerPage = 9;\n// const searchQuery = '';\n\nexport function getImages(searchQuery, page, imagesPerPage) {\n  const params = new URLSearchParams({\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(\n    `${BASE_URL}/?${params}&page=${page}&per_page=${imagesPerPage}&key=${API_KEY}&q=${searchQuery}`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    // page += 1;\n    // console.log('page in API', page);\n\n    return response.json();\n  });\n}\n","import { getImages } from '../services/API-service';\nimport { getRefs } from '../services/getRefs';\n\nconst { form, gallery, loadMore, error, alert, endOfCollection } = getRefs();\n\nform.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nlet value = '';\nlet limit = 15;\nlet page = 1;\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  value = evt.currentTarget.elements.searchQuery.value;\n  if (!value) {\n    alert.textContent = 'Enter something';\n    setTimeout(() => {\n      alert.textContent = '';\n    }, 3000);\n    return;\n  }\n  page = 1;\n  getImages(value, page, limit)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        loadMore.hidden = true;\n        error.textContent =\n          'Sorry, there are no images matching your search query. Please try again.';\n        setTimeout(() => {\n          error.textContent = '';\n        }, 3000);\n      }\n\n      if (hits.length < totalHits) {\n        loadMore.hidden = false;\n      }\n      clearMarkup();\n      // console.log('Before formSubmit', page);\n      renderGallery(hits);\n\n      if (hits.length === totalHits && hits.length !== 0) {\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      // console.log('onFormSubmit', page);\n    })\n    .catch(err => console.log(err));\n  // .finally(() => form.reset());\n}\n\nfunction onLoadMoreClick() {\n  getImages(value, page, limit)\n    .then(({ hits }) => {\n      if (hits.length < limit) {\n        loadMore.hidden = true;\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      renderGallery(hits);\n      // console.log('onLoad', page);\n    })\n    .catch(err => console.log(err));\n}\n\nfunction renderGallery(data) {\n  const markup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n  <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes: ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views: ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments: ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: ${downloads}</b>\n    </p>\n  </div>\n</div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearMarkup() {\n  gallery.innerHTML = '';\n  endOfCollection.textContent = '';\n}\n","export function getRefs() {\n  return {\n    form: document.querySelector('.search-form'),\n    gallery: document.querySelector('.gallery'),\n    loadMore: document.querySelector('.load-more'),\n    error: document.querySelector('.error'),\n    alert: document.querySelector('.alert'),\n    endOfCollection: document.querySelector('.collectionEnd'),\n  };\n}\n"],"names":["$8a55b91bdde8f9c1$export$f6086c1309fc54c0","searchQuery","page","imagesPerPage","params","URLSearchParams","image_type","orientation","safesearch","fetch","then","response","ok","Error","statusText","json","form","$1f0dc3b9307be026$var$form","gallery","$1f0dc3b9307be026$var$gallery","loadMore","$1f0dc3b9307be026$var$loadMore","error","$1f0dc3b9307be026$var$error","alert","$1f0dc3b9307be026$var$alert","endOfCollection","$1f0dc3b9307be026$var$endOfCollection","document","querySelector","addEventListener","evt","preventDefault","$1f0dc3b9307be026$var$value","currentTarget","elements","value","textContent","setTimeout","$1f0dc3b9307be026$var$page","hits","totalHits","length","hidden","innerHTML","$1f0dc3b9307be026$var$renderGallery","catch","err","console","log","data","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML"],"version":3,"file":"index.d91d87b7.js.map"}