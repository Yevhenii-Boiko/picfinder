{"mappings":"AAMO,SAASA,EAAUC,EAAaC,EAAMC,GAC3C,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,WAAY,QACZC,YAAa,aACbC,WAAY,SAGd,OAAOC,MACL,4BAAgBL,UAAeF,cAAiBC,8CAAkCF,KAClFS,MAAKC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAK3B,OAAOH,EAASI,MAAM,G,CCpB1B,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAWH,SAASC,cAAc,cAClCG,EAAQJ,SAASC,cAAc,UAC/BI,EAAQL,SAASC,cAAc,UAC/BK,EAAkBN,SAASC,cAAc,kBAE/CF,EAAKQ,iBAAiB,UAOtB,SAAsBC,GAIpB,GAHAA,EAAIC,iBAEJC,EAAQF,EAAIG,cAAcC,SAAS5B,YAAY6B,OAC1CH,EAKH,OAJAL,EAAMS,YAAc,uBACpBC,YAAW,KACTV,EAAMS,YAAc,EAAE,GACrB,KAGLE,EAAO,EACPjC,EAAU2B,EAAOM,EAfP,IAgBPvB,MAAK,EAACwB,KAAEA,EAAIC,UAAEA,MACO,IAAhBD,EAAKE,SACPhB,EAASiB,QAAS,EAClBhB,EAAMU,YACJ,2EACFC,YAAW,KACTX,EAAMU,YAAc,EAAE,GACrB,MAGDG,EAAKE,OAASD,IAChBf,EAASiB,QAAS,GAqExBlB,EAAQmB,UAAY,GACpBf,EAAgBQ,YAAc,GAlE1BQ,EAAcL,GAEVA,EAAKE,SAAWD,GAA6B,IAAhBD,EAAKE,SACpCb,EAAgBQ,YACd,8DAEJE,GAAQ,CAAC,IAGVO,OAAMC,GAAOC,QAAQC,IAAIF,KACzBG,SAAQ,IAAM5B,EAAK6B,S,IA5CxBzB,EAASI,iBAAiB,SA+C1B,WACExB,EAAU2B,EAAOM,EA7CP,IA8CPvB,MAAK,EAACwB,KAAEA,MACHA,EAAKE,OA/CH,KAgDJhB,EAASiB,QAAS,EAClBd,EAAgBQ,YACd,8DAEJE,GAAQ,EACRM,EAAcL,EAAK,IAGpBM,OAAMC,GAAOC,QAAQC,IAAIF,I,IAzD9B,IAAId,EAAQ,GAERM,EAAO,EA0DX,SAASM,EAAcO,GACrB,MAAMC,EAASD,EACZE,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,6CAEDN,WAAsBE,0FAGlBC,+DAGAC,kEAGGC,mEAGCC,sCAMjBC,KAAK,IACRrC,EAAQsC,mBAAmB,YAAaV,E","sources":["services/API-service.js","src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '33163433-7381312326b7cb4a7310bb1a7';\n// let page = 1;\n// const imagesPerPage = 9;\n// const searchQuery = '';\n\nexport function getImages(searchQuery, page, imagesPerPage) {\n  const params = new URLSearchParams({\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(\n    `${BASE_URL}/?${params}&page=${page}&per_page=${imagesPerPage}&key=${API_KEY}&q=${searchQuery}`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    // page += 1;\n    // console.log('page in API', page);\n\n    return response.json();\n  });\n}\n","import { getImages } from '../services/API-service';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-more');\nconst error = document.querySelector('.error');\nconst alert = document.querySelector('.alert');\nconst endOfCollection = document.querySelector('.collectionEnd');\n\nform.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nlet value = '';\nlet limit = 15;\nlet page = 1;\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  value = evt.currentTarget.elements.searchQuery.value;\n  if (!value) {\n    alert.textContent = 'Enter something';\n    setTimeout(() => {\n      alert.textContent = '';\n    }, 3000);\n    return;\n  }\n  page = 1;\n  getImages(value, page, limit)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        loadMore.hidden = true;\n        error.textContent =\n          'Sorry, there are no images matching your search query. Please try again.';\n        setTimeout(() => {\n          error.textContent = '';\n        }, 3000);\n      }\n\n      if (hits.length < totalHits) {\n        loadMore.hidden = false;\n      }\n      clearMarkup();\n      // console.log('Before formSubmit', page);\n      renderGallery(hits);\n\n      if (hits.length === totalHits && hits.length !== 0) {\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      // console.log('onFormSubmit', page);\n    })\n    .catch(err => console.log(err))\n    .finally(() => form.reset());\n}\n\nfunction onLoadMoreClick() {\n  getImages(value, page, limit)\n    .then(({ hits }) => {\n      if (hits.length < limit) {\n        loadMore.hidden = true;\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      renderGallery(hits);\n      // console.log('onLoad', page);\n    })\n    .catch(err => console.log(err));\n}\n\nfunction renderGallery(data) {\n  const markup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n  <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes: ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views: ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments: ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: ${downloads}</b>\n    </p>\n  </div>\n</div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearMarkup() {\n  gallery.innerHTML = '';\n  endOfCollection.textContent = '';\n}\n"],"names":["$8a55b91bdde8f9c1$export$f6086c1309fc54c0","searchQuery","page","imagesPerPage","params","URLSearchParams","image_type","orientation","safesearch","fetch","then","response","ok","Error","statusText","json","$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$loadMore","$1f0dc3b9307be026$var$error","$1f0dc3b9307be026$var$alert","$1f0dc3b9307be026$var$endOfCollection","addEventListener","evt","preventDefault","$1f0dc3b9307be026$var$value","currentTarget","elements","value","textContent","setTimeout","$1f0dc3b9307be026$var$page","hits","totalHits","length","hidden","innerHTML","$1f0dc3b9307be026$var$renderGallery","catch","err","console","log","finally","reset","data","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML"],"version":3,"file":"index.32203450.js.map"}