{"mappings":"YAMO,SAASA,EAAUC,EAAaC,EAAMC,GAC3C,IAAMC,EAAS,IAAIC,gBAAgB,CACjCC,WAAY,QACZC,YAAa,aACbC,WAAY,SAGd,OAAOC,MACL,GAAgBC,OAdH,0BAcD,MAAmBA,OAAfN,EAAO,UAAyBM,OAAjBR,EAAK,cAAiCQ,OAArBP,EAAc,SAAoBO,OAbtE,qCAaiE,OAAiBA,OAAZT,IAClFU,MAAK,SAAAC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAK3B,OAAOH,EAASI,M,ICnBpB,IAAmEC,ECF1D,CACLC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,SAAUH,SAASC,cAAc,cACjCG,MAAOJ,SAASC,cAAc,UAC9BI,MAAOL,SAASC,cAAc,UAC9BK,gBAAiBN,SAASC,cAAc,mBDJ9BM,EAAqDT,EAArDI,QAASM,EAA4CV,EAA5CK,SAAUM,EAAkCX,EAAlCM,MAAOM,EAA2BZ,EAA3BO,MAAOM,EAAoBb,EAApBQ,gBAAoBR,EAA3DC,KAEHa,iBAAiB,UAOtB,SAAsBC,GAIpB,GAHAA,EAAIC,mBAEJC,EAAQF,EAAIG,cAAcC,SAASnC,YAAYoC,OAM7C,OAJAR,EAAMS,YAAc,uBACpBC,YAAW,WACTV,EAAMS,YAAc,E,GACnB,KAILtC,EAAUkC,EADVM,EAAO,EAdG,IAgBP7B,MAAK,SAAA8B,G,IAAGC,EAAID,EAAJC,KAAMC,EAASF,EAATE,UACO,IAAhBD,EAAKE,SACPjB,EAASkB,QAAS,EAClBjB,EAAMU,YACJ,2EACFC,YAAW,WACTX,EAAMU,YAAc,E,GACnB,MAGDI,EAAKE,OAASD,IAChBhB,EAASkB,QAAS,GAqExBnB,EAAQoB,UAAY,GACpBhB,EAAgBQ,YAAc,GAlE1BS,EAAcL,GAEVA,EAAKE,SAAWD,GAA6B,IAAhBD,EAAKE,SACpCd,EAAgBQ,YACd,8DAEJE,GAAQ,C,IAGTQ,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E,OA3C9BtB,EAASI,iBAAiB,SA+C1B,WACE/B,EAAUkC,EAAOM,EA7CP,IA8CP7B,MAAK,SAAA8B,G,IAAGC,EAAID,EAAJC,KACHA,EAAKE,OA/CH,KAgDJjB,EAASkB,QAAS,EAClBf,EAAgBQ,YACd,8DAEJE,GAAQ,EACRO,EAAcL,E,IAGfM,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E,OAzD9B,IAAIf,EAAQ,GAERM,EAAO,EA0DX,SAASO,EAAcK,GACrB,IAAMC,EAASD,EACZE,KACC,SAAAb,G,IACEc,EAAYd,EAAZc,aAEAC,GADaf,EAAbgB,cACIhB,EAAJe,MACAE,EAAKjB,EAALiB,MACAC,EAAKlB,EAALkB,MACAC,EAAQnB,EAARmB,SACAC,EAASpB,EAAToB,UAEA,MAAO,6CAEqBnD,OAAtB6C,EAAa,WAGT7C,OAHkB8C,EAAK,0FAMvB9C,OAHAgD,EAAM,+DAMHhD,OAHHiD,EAAM,kEAMFjD,OAHDkD,EAAS,mEAGElD,OAAVmD,EAAU,mC,IAM3BC,KAAK,IACRpC,EAAQqC,mBAAmB,YAAaV,E","sources":["services/API-service.js","src/index.js","services/getRefs.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '33163433-7381312326b7cb4a7310bb1a7';\n// let page = 1;\n// const imagesPerPage = 9;\n// const searchQuery = '';\n\nexport function getImages(searchQuery, page, imagesPerPage) {\n  const params = new URLSearchParams({\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  return fetch(\n    `${BASE_URL}/?${params}&page=${page}&per_page=${imagesPerPage}&key=${API_KEY}&q=${searchQuery}`\n  ).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    // page += 1;\n    // console.log('page in API', page);\n\n    return response.json();\n  });\n}\n","import { getImages } from '../services/API-service';\nimport { getRefs } from '../services/getRefs';\n\nconst { form, gallery, loadMore, error, alert, endOfCollection } = getRefs();\n\nform.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nlet value = '';\nlet limit = 15;\nlet page = 1;\n\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  value = evt.currentTarget.elements.searchQuery.value;\n  if (!value) {\n    alert.textContent = 'Enter something';\n    setTimeout(() => {\n      alert.textContent = '';\n    }, 3000);\n    return;\n  }\n  page = 1;\n  getImages(value, page, limit)\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        loadMore.hidden = true;\n        error.textContent =\n          'Sorry, there are no images matching your search query. Please try again.';\n        setTimeout(() => {\n          error.textContent = '';\n        }, 3000);\n      }\n\n      if (hits.length < totalHits) {\n        loadMore.hidden = false;\n      }\n      clearMarkup();\n      // console.log('Before formSubmit', page);\n      renderGallery(hits);\n\n      if (hits.length === totalHits && hits.length !== 0) {\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      // console.log('onFormSubmit', page);\n    })\n    .catch(err => console.log(err));\n  // .finally(() => form.reset());\n}\n\nfunction onLoadMoreClick() {\n  getImages(value, page, limit)\n    .then(({ hits }) => {\n      if (hits.length < limit) {\n        loadMore.hidden = true;\n        endOfCollection.textContent =\n          \"We're sorry, but you've reached the end of search results.\";\n      }\n      page += 1;\n      renderGallery(hits);\n      // console.log('onLoad', page);\n    })\n    .catch(err => console.log(err));\n}\n\nfunction renderGallery(data) {\n  const markup = data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n  <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes: ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views: ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments: ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads: ${downloads}</b>\n    </p>\n  </div>\n</div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearMarkup() {\n  gallery.innerHTML = '';\n  endOfCollection.textContent = '';\n}\n","export function getRefs() {\n  return {\n    form: document.querySelector('.search-form'),\n    gallery: document.querySelector('.gallery'),\n    loadMore: document.querySelector('.load-more'),\n    error: document.querySelector('.error'),\n    alert: document.querySelector('.alert'),\n    endOfCollection: document.querySelector('.collectionEnd'),\n  };\n}\n"],"names":["$65cfbd7ea69e6639$export$f6086c1309fc54c0","searchQuery","page","imagesPerPage","params","URLSearchParams","image_type","orientation","safesearch","fetch","concat","then","response","ok","Error","statusText","json","$b8f9b7833fa37166$var$ref","form","document","querySelector","gallery","loadMore","error","alert","endOfCollection","$b8f9b7833fa37166$var$gallery","$b8f9b7833fa37166$var$loadMore","$b8f9b7833fa37166$var$error","$b8f9b7833fa37166$var$alert","$b8f9b7833fa37166$var$endOfCollection","addEventListener","evt","preventDefault","$b8f9b7833fa37166$var$value","currentTarget","elements","value","textContent","setTimeout","$b8f9b7833fa37166$var$page","param","hits","totalHits","length","hidden","innerHTML","$b8f9b7833fa37166$var$renderGallery","catch","err","console","log","data","markup","map","webformatURL","tags","largeImageURL","likes","views","comments","downloads","join","insertAdjacentHTML"],"version":3,"file":"index.1095a4c7.js.map"}